
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Leveraging BERT and a class-based TF-IDF to create easily interpretable topics.">
      
      
        <meta name="author" content="Maarten P. Grootendorst">
      
      
        <link rel="canonical" href="https://maartengr.github.io/BERTopic/getting_started/visualization/visualization.html">
      
      
      
      
        
      
      
      <link rel="icon" href="../../icon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Visualization - BERTopic</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,300i,400,400i,700,700i%7CUbuntu+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Ubuntu";--md-code-font:"Ubuntu Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="black" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#visualize-topics" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="BERTopic" class="md-header__button md-logo" aria-label="BERTopic" data-md-component="logo">
      
  <img src="../../img/icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BERTopic
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Visualization
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="black" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/MaartenGr/BERTopic" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html" class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../algorithm/algorithm.html" class="md-tabs__link">
        
  
  
    
  
  The Algorithm

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../quickstart/quickstart.html" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../faq.html" class="md-tabs__link">
        
  
  
    
  
  FAQ

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../usecases.html" class="md-tabs__link">
        
  
  
    
  
  Use Cases

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/bertopic.html" class="md-tabs__link">
          
  
  
  API

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../changelog.html" class="md-tabs__link">
        
  
  
    
  
  Changelog

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="BERTopic" class="md-nav__button md-logo" aria-label="BERTopic" data-md-component="logo">
      
  <img src="../../img/icon.png" alt="logo">

    </a>
    BERTopic
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/MaartenGr/BERTopic" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithm/algorithm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Algorithm
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../serialization/serialization.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Serialization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../search/search.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Search Topics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../best_practices/best_practices.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Best Practices
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    In-depth
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    In-depth
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5_1" >
        
          
          <label class="md-nav__link" for="__nav_3_5_1" id="__nav_3_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Visualizations
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Visualizations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="visualize_topics.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Topics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="visualize_documents.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="visualize_terms.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Terms
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="visualize_hierarchy.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hierarchy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5_2" >
        
          
          <label class="md-nav__link" for="__nav_3_5_2" id="__nav_3_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Update Topics
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Update Topics
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../topicreduction/topicreduction.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Topic Reduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../topicrepresentation/topicrepresentation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Update Topic Representations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../outlier_reduction/outlier_reduction.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Outlier reduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../parameter%20tuning/parametertuning.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Parameter tuning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tips_and_tricks/tips_and_tricks.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tips & Tricks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Sub-models
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Sub-models
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../embeddings/embeddings.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. Embeddings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dim_reduction/dim_reduction.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2. Dimensionality Reduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../clustering/clustering.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3. Clustering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vectorizers/vectorizers.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4. Vectorizers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ctfidf/ctfidf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    5. c-TF-IDF
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6_6" id="__nav_3_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    6. Fine-tune Topics
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    6. Fine-tune Topics
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../representation/representation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6A. Representation Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../representation/llm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6B. LLM & Generative AI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multiaspect/multiaspect.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6C. Multiple Representations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Variations
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Variations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../topicsovertime/topicsovertime.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dynamic Topic Modeling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hierarchicaltopics/hierarchicaltopics.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hierarchical Topic Modeling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multimodal/multimodal.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multimodal Topic Modeling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../online/online.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Online Topic Modeling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../merge/merge.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Merge Multiple Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7_6" >
        
          
          <label class="md-nav__link" for="__nav_3_7_6" id="__nav_3_7_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    (semi)-supervised
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    (semi)-supervised
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../semisupervised/semisupervised.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Semi-supervised Topic Modeling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supervised/supervised.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Supervised Topic Modeling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manual/manual.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Manual Topic Modeling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guided/guided.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Guided Topic Modeling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../zeroshot/zeroshot.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zero-shot Topic Modeling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../distribution/distribution.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Topic Distributions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../topicsperclass/topicsperclass.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Topics per Class
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../seed_words/seed_words.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Seed Words
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usecases.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Use Cases
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/bertopic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BERTopic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Sub-models
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Sub-models
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/backends.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. Backends
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/dimensionality.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2. Dimensionality Reduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/cluster.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3. Clustering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/vectorizers.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4. Vectorizers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/ctfidf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    5. c-TF-IDF
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/representations.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6. Fine-Tune Topic Representation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Plotting
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Plotting
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/plotting/barchart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Barchart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/plotting/documents.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/plotting/document_datamap.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documents with DataMapPlot
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/plotting/dtm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DTM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/plotting/hierarchical_documents.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hierarchical documents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/plotting/hierarchy.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hierarchical topics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/plotting/distribution.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Distribution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/plotting/heatmap.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Heatmap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/plotting/term.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Term Scores
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/plotting/topics.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Topics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/plotting/topics_per_class.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Topics per Class
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#visualize-topics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visualize Topics
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualize-documents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visualize Documents
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Visualize Documents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-hover" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom Hover
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualize-topic-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visualize Topic Hierarchy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Visualize Topic Hierarchy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hierarchical-labels" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hierarchical labels
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#text-based-topic-tree" class="md-nav__link">
    <span class="md-ellipsis">
      
        Text-based topic tree
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualize-hierarchical-documents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visualize Hierarchical Documents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualize-terms" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visualize Terms
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualize-topic-similarity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visualize Topic Similarity
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualize-term-score-decline" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visualize Term Score Decline
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualize-topics-over-time" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visualize Topics over Time
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualize-topics-per-class" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visualize Topics per Class
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualize-probabilities-or-distribution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visualize Probabilities or Distribution
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Visualization</h1>

<p>Visualizing BERTopic and its derivatives is important in understanding the model, how it works, and more importantly, where it works.
Since topic modeling can be quite a subjective field it is difficult for users to validate their models. Looking at the topics and seeing
if they make sense is an important factor in alleviating this issue.</p>
<h2 id="visualize-topics"><strong>Visualize Topics</strong><a class="headerlink" href="#visualize-topics" title="Permanent link">&para;</a></h2>
<p>After having trained our <code>BERTopic</code> model, we can iteratively go through hundreds of topics to get a good
understanding of the topics that were extracted. However, that takes quite some time and lacks a global representation.
Instead, we can visualize the topics that were generated in a way very similar to
<a href="https://github.com/cpsievert/LDAvis">LDAvis</a>.</p>
<p>We embed our c-TF-IDF representation of the topics in 2D using Umap and then visualize the two dimensions using
plotly such that we can create an interactive view.</p>
<p>First, we need to train our model:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">bertopic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BERTopic</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.datasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">fetch_20newsgroups</span>

<span class="n">docs</span> <span class="o">=</span> <span class="n">fetch_20newsgroups</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span>  <span class="n">remove</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;headers&#39;</span><span class="p">,</span> <span class="s1">&#39;footers&#39;</span><span class="p">,</span> <span class="s1">&#39;quotes&#39;</span><span class="p">))[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
<span class="n">topic_model</span> <span class="o">=</span> <span class="n">BERTopic</span><span class="p">()</span>
<span class="n">topics</span><span class="p">,</span> <span class="n">probs</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
</code></pre></div>
<p>Then, we can call <code>.visualize_topics</code> to create a 2D representation of your topics. The resulting graph is a
plotly interactive graph which can be converted to HTML:</p>
<div class="highlight"><pre><span></span><code><span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_topics</span><span class="p">()</span>
</code></pre></div>
<iframe src="viz.html" style="width:1000px; height: 680px; border: 0px;""></iframe>

<p>You can use the slider to select the topic which then lights up red. If you hover over a topic, then general
information is given about the topic, including the size of the topic and its corresponding words.</p>
<h2 id="visualize-documents"><strong>Visualize Documents</strong><a class="headerlink" href="#visualize-documents" title="Permanent link">&para;</a></h2>
<p>Using the previous method, we can visualize the topics and get insight into their relationships. However,
you might want a more fine-grained approach where we can visualize the documents inside the topics to see
if they were assigned correctly or whether they make sense. To do so, we can use the <code>topic_model.visualize_documents()</code>
function. This function recalculates the document embeddings and reduces them to 2-dimensional space for easier visualization
purposes. This process can be quite expensive, so it is advised to adhere to the following pipeline:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.datasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">fetch_20newsgroups</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sentence_transformers</span><span class="w"> </span><span class="kn">import</span> <span class="n">SentenceTransformer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">bertopic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BERTopic</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">umap</span><span class="w"> </span><span class="kn">import</span> <span class="n">UMAP</span>

<span class="c1"># Prepare embeddings</span>
<span class="n">docs</span> <span class="o">=</span> <span class="n">fetch_20newsgroups</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span>  <span class="n">remove</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;headers&#39;</span><span class="p">,</span> <span class="s1">&#39;footers&#39;</span><span class="p">,</span> <span class="s1">&#39;quotes&#39;</span><span class="p">))[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
<span class="n">sentence_model</span> <span class="o">=</span> <span class="n">SentenceTransformer</span><span class="p">(</span><span class="s2">&quot;all-MiniLM-L6-v2&quot;</span><span class="p">)</span>
<span class="n">embeddings</span> <span class="o">=</span> <span class="n">sentence_model</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">show_progress_bar</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Train BERTopic</span>
<span class="n">topic_model</span> <span class="o">=</span> <span class="n">BERTopic</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">embeddings</span><span class="p">)</span>

<span class="c1"># Run the visualization with the original embeddings</span>
<span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_documents</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">embeddings</span><span class="o">=</span><span class="n">embeddings</span><span class="p">)</span>

<span class="c1"># Reduce dimensionality of embeddings, this step is optional but much faster to perform iteratively:</span>
<span class="n">reduced_embeddings</span> <span class="o">=</span> <span class="n">UMAP</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">n_components</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">min_dist</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;cosine&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">embeddings</span><span class="p">)</span>
<span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_documents</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">reduced_embeddings</span><span class="o">=</span><span class="n">reduced_embeddings</span><span class="p">)</span>
</code></pre></div>
<iframe src="documents.html" style="width:1200px; height: 800px; border: 0px;""></iframe>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The visualization above was generated with the additional parameter <code>hide_document_hover=True</code> which disables the
option to hover over the individual points and see the content of the documents. This was done for demonstration purposes
as saving all those documents in the visualization can be quite expensive and result in large files. However,
it might be interesting to set <code>hide_document_hover=False</code> in order to hover over the points and see the content of the documents.</p>
</div>
<h3 id="custom-hover"><strong>Custom Hover</strong><a class="headerlink" href="#custom-hover" title="Permanent link">&para;</a></h3>
<p>When you visualize the documents, you might not always want to see the complete document over hover. Many documents have shorter information that might be more interesting to visualize, such as its title. To create the hover based on a documents' title instead of its content, you can simply pass a variable (<code>titles</code>) containing the title for each document:</p>
<div class="highlight"><pre><span></span><code><span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_documents</span><span class="p">(</span><span class="n">titles</span><span class="p">,</span> <span class="n">reduced_embeddings</span><span class="o">=</span><span class="n">reduced_embeddings</span><span class="p">)</span>
</code></pre></div>
<h2 id="visualize-topic-hierarchy"><strong>Visualize Topic Hierarchy</strong><a class="headerlink" href="#visualize-topic-hierarchy" title="Permanent link">&para;</a></h2>
<p>The topics that were created can be hierarchically reduced. In order to understand the potential hierarchical
structure of the topics, we can use <code>scipy.cluster.hierarchy</code> to create clusters and visualize how
they relate to one another. This might help to select an appropriate <code>nr_topics</code> when reducing the number
of topics that you have created. To visualize this hierarchy, run the following:</p>
<div class="highlight"><pre><span></span><code><span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_hierarchy</span><span class="p">()</span>
</code></pre></div>
<iframe src="hierarchy.html" style="width:1000px; height: 680px; border: 0px;""></iframe>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do note that this is not the actual procedure of <code>.reduce_topics()</code> when <code>nr_topics</code> is set to
auto since HDBSCAN is used to automatically extract topics. The visualization above closely resembles
the actual procedure of <code>.reduce_topics()</code> when any number of <code>nr_topics</code> is selected.</p>
</div>
<h3 id="hierarchical-labels"><strong>Hierarchical labels</strong><a class="headerlink" href="#hierarchical-labels" title="Permanent link">&para;</a></h3>
<p>Although visualizing this hierarchy gives us information about the structure, it would be helpful to see what happens
to the topic representations when merging topics. To do so, we first need to calculate the representations of the
hierarchical topics:</p>
<p>First, we train a basic BERTopic model:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">bertopic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BERTopic</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.datasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">fetch_20newsgroups</span>

<span class="n">docs</span> <span class="o">=</span> <span class="n">fetch_20newsgroups</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span>  <span class="n">remove</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;headers&#39;</span><span class="p">,</span> <span class="s1">&#39;footers&#39;</span><span class="p">,</span> <span class="s1">&#39;quotes&#39;</span><span class="p">))[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
<span class="n">topic_model</span> <span class="o">=</span> <span class="n">BERTopic</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">topics</span><span class="p">,</span> <span class="n">probs</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
<span class="n">hierarchical_topics</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">hierarchical_topics</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
</code></pre></div>
<p>To visualize these results, we simply need to pass the resulting <code>hierarchical_topics</code> to our <code>.visualize_hierarchy</code> function:</p>
<div class="highlight"><pre><span></span><code><span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_hierarchy</span><span class="p">(</span><span class="n">hierarchical_topics</span><span class="o">=</span><span class="n">hierarchical_topics</span><span class="p">)</span>
</code></pre></div>
<iframe src="hierarchical_topics.html" style="width:1000px; height: 2150px; border: 0px;""></iframe>

<p>If you <strong>hover</strong> over the black circles, you will see the topic representation at that level of the hierarchy. These representations
help you understand the effect of merging certain topics. Some might be logical to merge whilst others might not. Moreover,
we can now see which sub-topics can be found within certain larger themes.</p>
<h3 id="text-based-topic-tree"><strong>Text-based topic tree</strong><a class="headerlink" href="#text-based-topic-tree" title="Permanent link">&para;</a></h3>
<p>Although this gives a nice overview of the potential hierarchy, hovering over all black circles can be tiresome. Instead, we can
use <code>topic_model.get_topic_tree</code> to create a text-based representation of this hierarchy. Although the general structure is more difficult
to view, we can see better which topics could be logically merged:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">tree</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">get_topic_tree</span><span class="p">(</span><span class="n">hierarchical_topics</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="o">.</span>
<span class="err"></span><span class="n">atheists_atheism_god_moral_atheist</span>
     <span class="err"></span><span class="n">atheists_atheism_god_atheist_argument</span>
     <span class="err"></span>    <span class="err"></span><span class="n">atheists_atheism_god_atheist_argument</span> <span class="err"></span> <span class="n">Topic</span><span class="p">:</span> <span class="mi">21</span>
     <span class="err"></span>    <span class="err"></span><span class="n">br_god_exist_genetic_existence</span> <span class="err"></span> <span class="n">Topic</span><span class="p">:</span> <span class="mi">124</span>
     <span class="err"></span><span class="n">moral_morality_objective_immoral_morals</span> <span class="err"></span> <span class="n">Topic</span><span class="p">:</span> <span class="mi">29</span>
</code></pre></div>
<details>
  <summary>Click here to view the full tree.</summary>

  <div class="highlight"><pre><span></span><code><span class="w">  </span>.
<span class="w">  </span>people_armenian_said_god_armenians
<span class="w">  </span><span class="w">    </span>god_jesus_jehovah_lord_christ
<span class="w">  </span><span class="w">    </span><span class="w">    </span>god_jesus_jehovah_lord_christ
<span class="w">  </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>jehovah_lord_mormon_mcconkie_god
<span class="w">  </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>ra_satan_thou_god_lucifer<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">94</span>
<span class="w">  </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>jehovah_lord_mormon_mcconkie_unto<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">78</span>
<span class="w">  </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>jesus_mary_god_hell_sin
<span class="w">  </span><span class="w">    </span><span class="w">    </span><span class="w">         </span>jesus_hell_god_eternal_heaven
<span class="w">  </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>hell_jesus_eternal_god_heaven
<span class="w">  </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>jesus_tomb_disciples_resurrection_john<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">69</span>
<span class="w">  </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>hell_eternal_god_jesus_heaven<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">53</span>
<span class="w">  </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>aaron_baptism_sin_law_god<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">89</span>
<span class="w">  </span><span class="w">    </span><span class="w">    </span><span class="w">         </span>mary_sin_maria_priest_conception<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">56</span>
<span class="w">  </span><span class="w">    </span><span class="w">    </span>marriage_married_marry_ceremony_marriages<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">110</span>
<span class="w">  </span><span class="w">    </span>people_armenian_armenians_said_mr
<span class="w">  </span><span class="w">         </span>people_armenian_armenians_said_israel
<span class="w">  </span><span class="w">         </span><span class="w">    </span>god_homosexual_homosexuality_atheists_sex
<span class="w">  </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>homosexual_homosexuality_sex_gay_homosexuals
<span class="w">  </span><span class="w">         </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>kinsey_sex_gay_men_sexual<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">44</span>
<span class="w">  </span><span class="w">         </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>homosexuality_homosexual_sin_homosexuals_gay
<span class="w">  </span><span class="w">         </span><span class="w">    </span><span class="w">    </span><span class="w">         </span>gay_homosexual_homosexuals_sexual_cramer<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">50</span>
<span class="w">  </span><span class="w">         </span><span class="w">    </span><span class="w">    </span><span class="w">         </span>homosexuality_homosexual_sin_paul_sex<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">27</span>
<span class="w">  </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>god_atheists_atheism_moral_atheist
<span class="w">  </span><span class="w">         </span><span class="w">    </span><span class="w">         </span>islam_quran_judas_islamic_book
<span class="w">  </span><span class="w">         </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>jim_context_challenges_articles_quote<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">36</span>
<span class="w">  </span><span class="w">         </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>islam_quran_judas_islamic_book
<span class="w">  </span><span class="w">         </span><span class="w">    </span><span class="w">         </span><span class="w">         </span>islam_quran_islamic_rushdie_muslims<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">31</span>
<span class="w">  </span><span class="w">         </span><span class="w">    </span><span class="w">         </span><span class="w">         </span>judas_scripture_bible_books_greek<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">33</span>
<span class="w">  </span><span class="w">         </span><span class="w">    </span><span class="w">         </span>atheists_atheism_god_moral_atheist
<span class="w">  </span><span class="w">         </span><span class="w">    </span><span class="w">              </span>atheists_atheism_god_atheist_argument
<span class="w">  </span><span class="w">         </span><span class="w">    </span><span class="w">              </span><span class="w">    </span>atheists_atheism_god_atheist_argument<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">21</span>
<span class="w">  </span><span class="w">         </span><span class="w">    </span><span class="w">              </span><span class="w">    </span>br_god_exist_genetic_existence<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">124</span>
<span class="w">  </span><span class="w">         </span><span class="w">    </span><span class="w">              </span>moral_morality_objective_immoral_morals<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">29</span>
<span class="w">  </span><span class="w">         </span><span class="w">    </span>armenian_armenians_people_israel_said
<span class="w">  </span><span class="w">         </span><span class="w">         </span>armenian_armenians_israel_people_jews
<span class="w">  </span><span class="w">         </span><span class="w">         </span><span class="w">    </span>tax_rights_government_income_taxes
<span class="w">  </span><span class="w">         </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>rights_right_slavery_slaves_residence<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">106</span>
<span class="w">  </span><span class="w">         </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>tax_government_taxes_income_libertarians
<span class="w">  </span><span class="w">         </span><span class="w">         </span><span class="w">    </span><span class="w">         </span>government_libertarians_libertarian_regulation_party<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">58</span>
<span class="w">  </span><span class="w">         </span><span class="w">         </span><span class="w">    </span><span class="w">         </span>tax_taxes_income_billion_deficit<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">41</span>
<span class="w">  </span><span class="w">         </span><span class="w">         </span><span class="w">    </span>armenian_armenians_israel_people_jews
<span class="w">  </span><span class="w">         </span><span class="w">         </span><span class="w">         </span>gun_guns_militia_firearms_amendment
<span class="w">  </span><span class="w">         </span><span class="w">         </span><span class="w">         </span><span class="w">    </span>blacks_penalty_death_cruel_punishment<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">55</span>
<span class="w">  </span><span class="w">         </span><span class="w">         </span><span class="w">         </span><span class="w">    </span>gun_guns_militia_firearms_amendment<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">7</span>
<span class="w">  </span><span class="w">         </span><span class="w">         </span><span class="w">         </span>armenian_armenians_israel_jews_turkish
<span class="w">  </span><span class="w">         </span><span class="w">         </span><span class="w">              </span>israel_israeli_jews_arab_jewish<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">4</span>
<span class="w">  </span><span class="w">         </span><span class="w">         </span><span class="w">              </span>armenian_armenians_turkish_armenia_azerbaijan<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">15</span>
<span class="w">  </span><span class="w">         </span><span class="w">         </span>stephanopoulos_president_mr_myers_ms
<span class="w">  </span><span class="w">         </span><span class="w">              </span>serbs_muslims_stephanopoulos_mr_bosnia<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">35</span>
<span class="w">  </span><span class="w">         </span><span class="w">              </span>myers_stephanopoulos_president_ms_mr<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">87</span>
<span class="w">  </span><span class="w">         </span>batf_fbi_koresh_compound_gas
<span class="w">  </span><span class="w">              </span>reno_workers_janet_clinton_waco<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">77</span>
<span class="w">  </span><span class="w">              </span>batf_fbi_koresh_gas_compound
<span class="w">  </span><span class="w">                   </span>batf_koresh_fbi_warrant_compound
<span class="w">  </span><span class="w">                   </span><span class="w">    </span>batf_warrant_raid_compound_fbi<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">42</span>
<span class="w">  </span><span class="w">                   </span><span class="w">    </span>koresh_batf_fbi_children_compound<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">61</span>
<span class="w">  </span><span class="w">                   </span>fbi_gas_tear_bds_building<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">23</span>
<span class="w">  </span>use_like_just_dont_new
<span class="w">      </span>game_team_year_games_like
<span class="w">      </span><span class="w">    </span>game_team_games_25_year
<span class="w">      </span><span class="w">    </span><span class="w">    </span>game_team_games_25_season
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>window_printer_use_problem_mhz
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>mhz_wire_simms_wiring_battery
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>simms_mhz_battery_cpu_heat
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>simms_pds_simm_vram_lc
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>pds_nubus_lc_slot_card<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">119</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>simms_simm_vram_meg_dram<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">32</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>mhz_battery_cpu_heat_speed
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span>mhz_cpu_speed_heat_fan
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>mhz_cpu_speed_heat_fan
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>fan_cpu_heat_sink_fans<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">92</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>mhz_speed_cpu_fpu_clock<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">22</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>monitor_turn_power_computer_electricity<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">91</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span>battery_batteries_concrete_duo_discharge
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">              </span>duo_battery_apple_230_problem<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">121</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">              </span>battery_batteries_concrete_discharge_temperature<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">75</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>wire_wiring_ground_neutral_outlets
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span>wire_wiring_ground_neutral_outlets
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>wire_wiring_ground_neutral_outlets
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>leds_uv_blue_light_boards<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">66</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>wire_wiring_ground_neutral_outlets<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">120</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>scope_scopes_phone_dial_number
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">         </span>dial_number_phone_line_output<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">93</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">         </span>scope_scopes_motorola_generator_oscilloscope<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">113</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span>celp_dsp_sampling_antenna_digital
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">              </span>antenna_antennas_receiver_cable_transmitter<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">70</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">              </span>celp_dsp_sampling_speech_voice<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">52</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>window_printer_xv_mouse_windows
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span>window_xv_error_widget_problem
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>error_symbol_undefined_xterm_rx
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>symbol_error_undefined_doug_parse<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">63</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>rx_remote_server_xdm_xterm<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">45</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>window_xv_widget_application_expose
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">         </span>window_widget_expose_application_event
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">         </span><span class="w">    </span>gc_mydisplay_draw_gxxor_drawing<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">103</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">         </span><span class="w">    </span>window_widget_application_expose_event<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">25</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">         </span>xv_den_polygon_points_algorithm
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">              </span>den_polygon_points_algorithm_polygons<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">28</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">              </span>xv_24bit_image_bit_images<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">57</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">         </span>printer_fonts_print_mouse_postscript
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">              </span>printer_fonts_print_font_deskjet
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">              </span><span class="w">    </span>scanner_logitech_grayscale_ocr_scanman<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">108</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">              </span><span class="w">    </span>printer_fonts_print_font_deskjet
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">              </span><span class="w">         </span>printer_print_deskjet_hp_ink<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">18</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">              </span><span class="w">         </span>fonts_font_truetype_tt_atm<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">49</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">              </span>mouse_ghostscript_midi_driver_postscript
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">                   </span>ghostscript_midi_postscript_files_file
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">                   </span><span class="w">    </span>ghostscript_postscript_pageview_ghostview_dsc<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">104</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">                   </span><span class="w">    </span>midi_sound_file_windows_driver
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">                   </span><span class="w">         </span>location_mar_file_host_rwrr<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">83</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">                   </span><span class="w">         </span>midi_sound_driver_blaster_soundblaster<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">98</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">                   </span>mouse_driver_mice_ball_problem<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">68</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>game_team_games_25_season
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span>1st_sale_condition_comics_hulk
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>sale_condition_offer_asking_cd
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>condition_stereo_amp_speakers_asking
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>miles_car_amfm_toyota_cassette<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">62</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>amp_speakers_condition_stereo_audio<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">24</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>games_sale_pom_cds_shipping
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">         </span>pom_cds_sale_shipping_cd
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>size_shipping_sale_condition_mattress<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">100</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>pom_cds_cd_sale_picture<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">37</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">         </span>games_game_snes_sega_genesis<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">40</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>1st_hulk_comics_art_appears
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">         </span>1st_hulk_comics_art_appears
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">         </span><span class="w">    </span>lens_tape_camera_backup_lenses
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>tape_backup_tapes_drive_4mm<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">107</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>lens_camera_lenses_zoom_pouch<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">114</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">         </span><span class="w">    </span>1st_hulk_comics_art_appears
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">         </span><span class="w">         </span>1st_hulk_comics_art_appears<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">105</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">         </span><span class="w">         </span>books_book_cover_trek_chemistry<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">125</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">         </span>tickets_hotel_ticket_voucher_package
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">              </span>hotel_voucher_package_vacation_room<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">74</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">              </span>tickets_ticket_june_airlines_july<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">84</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">         </span>game_team_games_season_hockey
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">              </span>game_hockey_team_25_550
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">              </span><span class="w">    </span>espn_pt_pts_game_la<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">17</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">              </span><span class="w">    </span>team_25_game_hockey_550<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">2</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span><span class="w">              </span>year_game_hit_baseball_players<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="w">    </span><span class="w">    </span>bike_car_greek_insurance_msg
<span class="w">      </span><span class="w">    </span><span class="w">         </span>car_bike_insurance_cars_engine
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>car_insurance_cars_radar_engine
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>insurance_health_private_care_canada
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>insurance_health_private_care_canada<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">99</span>
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>insurance_car_accident_rates_sue<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">82</span>
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>car_cars_radar_engine_detector
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">         </span>car_radar_cars_detector_engine
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>radar_detector_detectors_ka_alarm<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">39</span>
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>car_cars_mustang_ford_engine
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">         </span><span class="w">         </span>clutch_shift_shifting_transmission_gear<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">88</span>
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">         </span><span class="w">         </span>car_cars_mustang_ford_v8<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">14</span>
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">         </span>oil_diesel_odometer_diesels_car
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">              </span>odometer_oil_sensor_car_drain
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">              </span><span class="w">    </span>odometer_sensor_speedo_gauge_mileage<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">96</span>
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">              </span><span class="w">    </span>oil_drain_car_leaks_taillights<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">102</span>
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">    </span><span class="w">              </span>diesel_diesels_emissions_fuel_oil<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">79</span>
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>bike_riding_ride_bikes_motorcycle
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">         </span>bike_ride_riding_bikes_lane
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">         </span><span class="w">    </span>bike_ride_riding_lane_car<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">11</span>
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">         </span><span class="w">    </span>bike_bikes_miles_honda_motorcycle<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">19</span>
<span class="w">      </span><span class="w">    </span><span class="w">         </span><span class="w">         </span>countersteering_bike_motorcycle_rear_shaft<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">46</span>
<span class="w">      </span><span class="w">    </span><span class="w">         </span>greek_msg_kuwait_greece_water
<span class="w">      </span><span class="w">    </span><span class="w">              </span>greek_msg_kuwait_greece_water
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span>greek_msg_kuwait_greece_dog
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">    </span>greek_msg_kuwait_greece_dog
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>greek_kuwait_greece_turkish_greeks
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>greek_greece_turkish_greeks_cyprus<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">71</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>kuwait_iraq_iran_gulf_arabia<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">76</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>msg_dog_drugs_drug_food
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">    </span><span class="w">         </span>dog_dogs_cooper_trial_weaver
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>clinton_bush_quayle_reagan_panicking<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">101</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>dog_dogs_cooper_trial_weaver
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">         </span>cooper_trial_weaver_spence_witnesses<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">90</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">    </span><span class="w">         </span><span class="w">         </span>dog_dogs_bike_trained_springer<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">67</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">    </span><span class="w">         </span>msg_drugs_drug_food_chinese
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">    </span><span class="w">              </span>msg_food_chinese_foods_taste<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">30</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">    </span><span class="w">              </span>drugs_drug_marijuana_cocaine_alcohol<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">72</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">    </span>water_theory_universe_science_larsons
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">         </span>water_nuclear_cooling_steam_dept
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>rocketry_rockets_engines_nuclear_plutonium<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">115</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">         </span><span class="w">    </span>water_cooling_steam_dept_plants
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">         </span><span class="w">         </span>water_dept_phd_environmental_atmospheric<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">97</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">         </span><span class="w">         </span>cooling_water_steam_towers_plants<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">109</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">         </span>theory_universe_larsons_larson_science
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">              </span>theory_universe_larsons_larson_science<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">54</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span><span class="w">              </span>oort_cloud_grbs_gamma_burst<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">80</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">    </span>helmet_kirlian_photography_lock_wax
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">         </span>helmet_kirlian_photography_leaf_mask
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">         </span><span class="w">    </span>kirlian_photography_leaf_pictures_deleted
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>deleted_joke_stuff_maddi_nickname
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">         </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>joke_maddi_nickname_nicknames_frank<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">43</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">         </span><span class="w">    </span><span class="w">    </span><span class="w">    </span>deleted_stuff_bookstore_joke_motto<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">81</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>kirlian_photography_leaf_pictures_aura<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">85</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">         </span><span class="w">    </span>helmet_mask_liner_foam_cb
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">         </span><span class="w">         </span>helmet_liner_foam_cb_helmets<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">112</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">         </span><span class="w">         </span>mask_goalies_77_santore_tl<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">123</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">         </span>lock_wax_paint_plastic_ear
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">              </span>lock_cable_locks_bike_600<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">117</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">              </span>wax_paint_ear_plastic_skin
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">                   </span>wax_paint_plastic_scratches_solvent<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">65</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span><span class="w">                   </span>ear_wax_skin_greasy_acne<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">116</span>
<span class="w">      </span><span class="w">    </span><span class="w">              </span>m4_mp_14_mw_mo
<span class="w">      </span><span class="w">    </span><span class="w">                   </span>m4_mp_14_mw_mo
<span class="w">      </span><span class="w">    </span><span class="w">                   </span><span class="w">    </span>m4_mp_14_mw_mo<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">111</span>
<span class="w">      </span><span class="w">    </span><span class="w">                   </span><span class="w">    </span>test_ensign_nameless_deane_deanebinahccbrandeisedu<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">118</span>
<span class="w">      </span><span class="w">    </span><span class="w">                   </span>ites_cheek_hello_hi_ken<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">3</span>
<span class="w">      </span><span class="w">    </span>space_medical_health_disease_cancer
<span class="w">      </span><span class="w">         </span>medical_health_disease_cancer_patients
<span class="w">      </span><span class="w">         </span><span class="w">    </span>cancer_centers_center_medical_research<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">122</span>
<span class="w">      </span><span class="w">         </span><span class="w">    </span>health_medical_disease_patients_hiv
<span class="w">      </span><span class="w">         </span><span class="w">         </span>patients_medical_disease_candida_health
<span class="w">      </span><span class="w">         </span><span class="w">         </span><span class="w">    </span>candida_yeast_infection_gonorrhea_infections<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">48</span>
<span class="w">      </span><span class="w">         </span><span class="w">         </span><span class="w">    </span>patients_disease_cancer_medical_doctor
<span class="w">      </span><span class="w">         </span><span class="w">         </span><span class="w">         </span>hiv_medical_cancer_patients_doctor<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">34</span>
<span class="w">      </span><span class="w">         </span><span class="w">         </span><span class="w">         </span>pain_drug_patients_disease_diet<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">26</span>
<span class="w">      </span><span class="w">         </span><span class="w">         </span>health_newsgroup_tobacco_vote_votes<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">9</span>
<span class="w">      </span><span class="w">         </span>space_launch_nasa_shuttle_orbit
<span class="w">      </span><span class="w">              </span>space_moon_station_nasa_launch
<span class="w">      </span><span class="w">              </span><span class="w">    </span>sky_advertising_billboard_billboards_space<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">59</span>
<span class="w">      </span><span class="w">              </span><span class="w">    </span>space_station_moon_redesign_nasa<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">16</span>
<span class="w">      </span><span class="w">              </span>space_mission_hst_launch_orbit
<span class="w">      </span><span class="w">                   </span>space_launch_nasa_orbit_propulsion
<span class="w">      </span><span class="w">                   </span><span class="w">    </span>space_launch_nasa_propulsion_astronaut<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">47</span>
<span class="w">      </span><span class="w">                   </span><span class="w">    </span>orbit_km_jupiter_probe_earth<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">86</span>
<span class="w">      </span><span class="w">                   </span>hst_mission_shuttle_orbit_arrays<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">60</span>
<span class="w">      </span>drive_file_key_windows_use
<span class="w">          </span>key_file_jpeg_encryption_image
<span class="w">          </span><span class="w">    </span>key_encryption_clipper_chip_keys
<span class="w">          </span><span class="w">    </span><span class="w">    </span>key_clipper_encryption_chip_keys<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">1</span>
<span class="w">          </span><span class="w">    </span><span class="w">    </span>entry_file_ripem_entries_key<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">73</span>
<span class="w">          </span><span class="w">    </span>jpeg_image_file_gif_images
<span class="w">          </span><span class="w">         </span>motif_graphics_ftp_available_3d
<span class="w">          </span><span class="w">         </span><span class="w">    </span>motif_graphics_openwindows_ftp_available
<span class="w">          </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>openwindows_motif_xview_windows_mouse<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">20</span>
<span class="w">          </span><span class="w">         </span><span class="w">    </span><span class="w">    </span>graphics_widget_ray_3d_available<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">95</span>
<span class="w">          </span><span class="w">         </span><span class="w">    </span>3d_machines_version_comments_contact<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">38</span>
<span class="w">          </span><span class="w">         </span>jpeg_image_gif_images_format
<span class="w">          </span><span class="w">              </span>gopher_ftp_files_stuffit_images<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">51</span>
<span class="w">          </span><span class="w">              </span>jpeg_image_gif_format_images<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">13</span>
<span class="w">          </span>drive_db_card_scsi_windows
<span class="w">              </span>db_windows_dos_mov_os2
<span class="w">              </span><span class="w">    </span>copy_protection_program_software_disk<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">64</span>
<span class="w">              </span><span class="w">    </span>db_windows_dos_mov_os2<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">8</span>
<span class="w">              </span>drive_card_scsi_drives_ide
<span class="w">                      </span>drive_scsi_drives_ide_disk
<span class="w">                      </span><span class="w">    </span>drive_scsi_drives_ide_disk<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">6</span>
<span class="w">                      </span><span class="w">    </span>meg_sale_ram_drive_shipping<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">12</span>
<span class="w">                      </span>card_modem_monitor_video_drivers
<span class="w">                          </span>card_monitor_video_drivers_vga<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">5</span>
<span class="w">                          </span>modem_port_serial_irq_com<span class="w"> </span><span class="w"> </span>Topic:<span class="w"> </span><span class="m">10</span>
</code></pre></div>
</details>

<h2 id="visualize-hierarchical-documents"><strong>Visualize Hierarchical Documents</strong><a class="headerlink" href="#visualize-hierarchical-documents" title="Permanent link">&para;</a></h2>
<p>We can extend the previous method by calculating the topic representation at different levels of the hierarchy and
plotting them on a 2D plane. To do so, we first need to calculate the hierarchical topics:</p>
<p><div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.datasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">fetch_20newsgroups</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sentence_transformers</span><span class="w"> </span><span class="kn">import</span> <span class="n">SentenceTransformer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">bertopic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BERTopic</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">umap</span><span class="w"> </span><span class="kn">import</span> <span class="n">UMAP</span>

<span class="c1"># Prepare embeddings</span>
<span class="n">docs</span> <span class="o">=</span> <span class="n">fetch_20newsgroups</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span>  <span class="n">remove</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;headers&#39;</span><span class="p">,</span> <span class="s1">&#39;footers&#39;</span><span class="p">,</span> <span class="s1">&#39;quotes&#39;</span><span class="p">))[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
<span class="n">sentence_model</span> <span class="o">=</span> <span class="n">SentenceTransformer</span><span class="p">(</span><span class="s2">&quot;all-MiniLM-L6-v2&quot;</span><span class="p">)</span>
<span class="n">embeddings</span> <span class="o">=</span> <span class="n">sentence_model</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">show_progress_bar</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Train BERTopic and extract hierarchical topics</span>
<span class="n">topic_model</span> <span class="o">=</span> <span class="n">BERTopic</span><span class="p">()</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">embeddings</span><span class="p">)</span>
<span class="n">hierarchical_topics</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">hierarchical_topics</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
</code></pre></div>
Then, we can visualize the hierarchical documents by either supplying it with our embeddings or by
reducing their dimensionality ourselves:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Run the visualization with the original embeddings</span>
<span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_hierarchical_documents</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">hierarchical_topics</span><span class="p">,</span> <span class="n">embeddings</span><span class="o">=</span><span class="n">embeddings</span><span class="p">)</span>

<span class="c1"># Reduce dimensionality of embeddings, this step is optional but much faster to perform iteratively:</span>
<span class="n">reduced_embeddings</span> <span class="o">=</span> <span class="n">UMAP</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">n_components</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">min_dist</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;cosine&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">embeddings</span><span class="p">)</span>
<span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_hierarchical_documents</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">hierarchical_topics</span><span class="p">,</span> <span class="n">reduced_embeddings</span><span class="o">=</span><span class="n">reduced_embeddings</span><span class="p">)</span>
</code></pre></div>
<iframe src="hierarchical_documents.html" style="width:1200px; height: 800px; border: 0px;""></iframe>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The visualization above was generated with the additional parameter <code>hide_document_hover=True</code> which disables the
option to hover over the individual points and see the content of the documents. This makes the resulting visualization
smaller and fit into your RAM. However, it might be interesting to set <code>hide_document_hover=False</code> to hover
over the points and see the content of the documents.</p>
</div>
<h2 id="visualize-terms"><strong>Visualize Terms</strong><a class="headerlink" href="#visualize-terms" title="Permanent link">&para;</a></h2>
<p>We can visualize the selected terms for a few topics by creating bar charts out of the c-TF-IDF scores
for each topic representation. Insights can be gained from the relative c-TF-IDF scores between and within
topics. Moreover, you can easily compare topic representations to each other.
To visualize this hierarchy, run the following:</p>
<div class="highlight"><pre><span></span><code><span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_barchart</span><span class="p">()</span>
</code></pre></div>
<iframe src="bar_chart.html" style="width:1100px; height: 660px; border: 0px;""></iframe>

<h2 id="visualize-topic-similarity"><strong>Visualize Topic Similarity</strong><a class="headerlink" href="#visualize-topic-similarity" title="Permanent link">&para;</a></h2>
<p>Having generated topic embeddings, through both c-TF-IDF and embeddings, we can create a similarity
matrix by simply applying cosine similarities through those topic embeddings. The result will be a
matrix indicating how similar certain topics are to each other.
To visualize the heatmap, run the following:</p>
<div class="highlight"><pre><span></span><code><span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_heatmap</span><span class="p">()</span>
</code></pre></div>
<iframe src="heatmap.html" style="width:1000px; height: 720px; border: 0px;""></iframe>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can set <code>n_clusters</code> in <code>visualize_heatmap</code> to order the topics by their similarity.
This will result in blocks being formed in the heatmap indicating which clusters of topics are
similar to each other. This step is very much recommended as it will make reading the heatmap easier.</p>
</div>
<h2 id="visualize-term-score-decline"><strong>Visualize Term Score Decline</strong><a class="headerlink" href="#visualize-term-score-decline" title="Permanent link">&para;</a></h2>
<p>Topics are represented by a number of words starting with the best representative word.
Each word is represented by a c-TF-IDF score. The higher the score, the more representative a word
to the topic is. Since the topic words are sorted by their c-TF-IDF score, the scores slowly decline
with each word that is added. At some point adding words to the topic representation only marginally
increases the total c-TF-IDF score and would not be beneficial for its representation.</p>
<p>To visualize this effect, we can plot the c-TF-IDF scores for each topic by the term rank of each word.
In other words, the position of the words (term rank), where the words with
the highest c-TF-IDF score will have a rank of 1, will be put on the x-axis. Whereas the y-axis
will be populated by the c-TF-IDF scores. The result is a visualization that shows you the decline
of c-TF-IDF score when adding words to the topic representation. It allows you, using the elbow method,
the select the best number of words in a topic.</p>
<p>To visualize the c-TF-IDF score decline, run the following:</p>
<div class="highlight"><pre><span></span><code><span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_term_rank</span><span class="p">()</span>
</code></pre></div>
<iframe src="term_rank.html" style="width:1000px; height: 530px; border: 0px;""></iframe>

<p>To enable the log scale on the y-axis for a better view of individual topics, run the following:</p>
<div class="highlight"><pre><span></span><code><span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_term_rank</span><span class="p">(</span><span class="n">log_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<iframe src="term_rank_log.html" style="width:1000px; height: 530px; border: 0px;""></iframe>

<p>This visualization was heavily inspired by the "Term Probability Decline" visualization found in an
analysis by the amazing <a href="https://tmtoolkit.readthedocs.io/">tmtoolkit</a>.
Reference to that specific analysis can be found
<a href="https://wzbsocialsciencecenter.github.io/tm_corona/tm_analysis.html">here</a>.</p>
<h2 id="visualize-topics-over-time"><strong>Visualize Topics over Time</strong><a class="headerlink" href="#visualize-topics-over-time" title="Permanent link">&para;</a></h2>
<p>After creating topics over time with Dynamic Topic Modeling, we can visualize these topics by
leveraging the interactive abilities of Plotly. Plotly allows us to show the frequency
of topics over time whilst giving the option of hovering over the points to show the time-specific topic representations.
Simply call <code>.visualize_topics_over_time</code> with the newly created topics over time:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">bertopic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BERTopic</span>

<span class="c1"># Prepare data</span>
<span class="n">trump</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://drive.google.com/uc?export=download&amp;id=1xRKHaP-QwACMydlDnyFPEaFdtskJuBa6&#39;</span><span class="p">)</span>
<span class="n">trump</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">trump</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;http\S+&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">trump</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">trump</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">!=</span><span class="s2">&quot;@&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">())),</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">trump</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">trump</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;[^a-zA-Z]+&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()),</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">trump</span> <span class="o">=</span> <span class="n">trump</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">trump</span><span class="o">.</span><span class="n">isRetweet</span> <span class="o">==</span> <span class="s2">&quot;f&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">trump</span><span class="o">.</span><span class="n">text</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="p">:]</span>
<span class="n">timestamps</span> <span class="o">=</span> <span class="n">trump</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="n">tweets</span> <span class="o">=</span> <span class="n">trump</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

<span class="c1"># Create topics over time</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">BERTopic</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">topics</span><span class="p">,</span> <span class="n">probs</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">tweets</span><span class="p">)</span>
<span class="n">topics_over_time</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">topics_over_time</span><span class="p">(</span><span class="n">tweets</span><span class="p">,</span> <span class="n">timestamps</span><span class="p">)</span>
</code></pre></div>
<p>Then, we visualize some interesting topics:</p>
<div class="highlight"><pre><span></span><code><span class="n">model</span><span class="o">.</span><span class="n">visualize_topics_over_time</span><span class="p">(</span><span class="n">topics_over_time</span><span class="p">,</span> <span class="n">topics</span><span class="o">=</span><span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">91</span><span class="p">])</span>
</code></pre></div>
<iframe src="trump.html" style="width:1000px; height: 680px; border: 0px;""></iframe>

<h2 id="visualize-topics-per-class"><strong>Visualize Topics per Class</strong><a class="headerlink" href="#visualize-topics-per-class" title="Permanent link">&para;</a></h2>
<p>You might want to extract and visualize the topic representation per class. For example, if you have
specific groups of users that might approach topics differently, then extracting them would help understanding
how these users talk about certain topics. In other words, this is simply creating a topic representation for
certain classes that you might have in your data.</p>
<p>First, we need to train our model:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">bertopic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BERTopic</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.datasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">fetch_20newsgroups</span>

<span class="c1"># Prepare data and classes</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">fetch_20newsgroups</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span>  <span class="n">remove</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;headers&#39;</span><span class="p">,</span> <span class="s1">&#39;footers&#39;</span><span class="p">,</span> <span class="s1">&#39;quotes&#39;</span><span class="p">))</span>
<span class="n">docs</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
<span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;target_names&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]]</span>

<span class="c1"># Create topic model and calculate topics per class</span>
<span class="n">topic_model</span> <span class="o">=</span> <span class="n">BERTopic</span><span class="p">()</span>
<span class="n">topics</span><span class="p">,</span> <span class="n">probs</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
<span class="n">topics_per_class</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">topics_per_class</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="n">classes</span><span class="p">)</span>
</code></pre></div>
<p>Then, we visualize the topic representation of major topics per class:</p>
<div class="highlight"><pre><span></span><code><span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_topics_per_class</span><span class="p">(</span><span class="n">topics_per_class</span><span class="p">)</span>
</code></pre></div>
<iframe src="topics_per_class.html" style="width:1400px; height: 1000px; border: 0px;""></iframe>

<h2 id="visualize-probabilities-or-distribution"><strong>Visualize Probabilities or Distribution</strong><a class="headerlink" href="#visualize-probabilities-or-distribution" title="Permanent link">&para;</a></h2>
<p>We can generate the topic-document probability matrix by simply setting <code>calculate_probabilities=True</code> if a HDBSCAN model is used:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">bertopic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BERTopic</span>
<span class="n">topic_model</span> <span class="o">=</span> <span class="n">BERTopic</span><span class="p">(</span><span class="n">calculate_probabilities</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">topics</span><span class="p">,</span> <span class="n">probs</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
</code></pre></div>
<p>The resulting <code>probs</code> variable contains the soft-clustering as done through HDBSCAN.</p>
<p>If a non-HDBSCAN model is used, we can estimate the topic distributions after training our model:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">bertopic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BERTopic</span>

<span class="n">topic_model</span> <span class="o">=</span> <span class="n">BERTopic</span><span class="p">()</span>
<span class="n">topics</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
<span class="n">topic_distr</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">approximate_distribution</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">min_similarity</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
<p>Then, we either pass the <code>probs</code> or <code>topic_distr</code> variable to <code>.visualize_distribution</code> to visualize either the probability distributions or the topic distributions:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># To visualize the probabilities of topic assignment</span>
<span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_distribution</span><span class="p">(</span><span class="n">probs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># To visualize the topic distributions in a document</span>
<span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_distribution</span><span class="p">(</span><span class="n">topic_distr</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</code></pre></div>
<iframe src="probabilities.html" style="width:1000px; height: 500px; border: 0px;""></iframe>

<p>Although a topic distribution is nice, we may want to see how each token contributes to a specific topic. To do so, we need to first calculate topic distributions on a token level and then visualize the results:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Calculate the topic distributions on a token-level</span>
<span class="n">topic_distr</span><span class="p">,</span> <span class="n">topic_token_distr</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">approximate_distribution</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">calculate_tokens</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Visualize the token-level distributions</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">visualize_approximate_distribution</span><span class="p">(</span><span class="n">docs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">topic_token_distr</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">df</span>
</code></pre></div>
<p><br><br>
<img src="../distribution/distribution.png">
<br><br></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To get the stylized dataframe for <code>.visualize_approximate_distribution</code> you will need to have Jinja installed. If you do not have this installed, an unstylized dataframe will be returned instead. You can install Jinja via <code>pip install jinja2</code></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The distribution of the probabilities does not give an indication to
the distribution of the frequencies of topics across a document. It merely shows
how confident BERTopic is that certain topics can be found in a document.</p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Maintained by <a href="https://github.com/MaartenGr">Maarten Grootendorst</a>.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.instant", "navigation.top", "navigation.tracking", "toc.follow", "content.code.copy"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>